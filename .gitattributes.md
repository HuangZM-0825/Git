`.gitattributes` 檔案是 Git 中用來定義特定檔案或路徑模式的屬性設定文件。透過這個檔案，你可以控制 Git 如何處理專案中的各種檔案，以下是其主要用途：

### 1. **管理行尾字元（Line Endings）**
- **設定自動轉換：**
  ``` 
  * text=auto
  ```
  這可以讓 Git 根據作業系統自動轉換行尾字元，避免不同平台之間的行尾差異問題。

### 2. **指定合併策略**
- **防止特定檔案被合併：**
  ```
  *.lock merge=ours
  ```
  這樣設定後，Git 在合併時會優先保留本地版本，忽略遠端變更。

### 3. **定義差異（Diff）驅動**
- **為特定檔案類型設定自訂的 diff 驅動：**
  ```
  *.md diff=markdown
  ```
  可以讓 Git 使用特定的工具或方法來比較檔案差異。

### 4. **標記二進位檔案**
- **避免 Git 嘗試對二進位檔案進行 diff：**
  ```
  *.png binary
  ```
  標記為 `binary` 可以提升效能，防止不必要的差異計算。

### 5. **控制匯出（Export）**
- **排除特定檔案在匯出時被包含：**
  ```
  secret.txt export-ignore
  ```
  當使用 `git archive` 等匯出命令時，這些檔案將被忽略。

### 6. **GitHub Linguist 設定**
- **調整 GitHub 上語言統計或標記檔案：**
  ```
  *.min.js linguist-vendored
  ```
  可以標記某些檔案為第三方庫，避免影響語言統計。

### 7. **位置與語法**
- `.gitattributes` 通常位於專案的根目錄，但也可以在子目錄中存在，適用於該目錄及其子目錄下的檔案。
- 支援使用通配符（如 `*`, `?`, `[]`）來匹配檔案路徑。

### **小結**
`.gitattributes` 是一個強大的工具，可以幫助你細緻地控制 Git 對專案中檔案的處理方式，提升專案的協作效率與一致性。在管理跨平台專案、處理大檔案或特殊檔案類型時，合理配置 `.gitattributes` 能夠解決許多潛在的問題。


---


這一行配置了 Git LFS（Large File Storage）來管理 `.mp4` 檔案，並設定相關的處理方式。讓我們逐步解析這行設定：

```
*.mp4 filter=lfs diff=lfs merge=lfs -text
```

### **1. 檔案匹配模式**
- `*.mp4`：
  - **說明**：這表示所有副檔名為 `.mp4` 的檔案都將套用後續的屬性設定。

### **2. Git LFS 相關設定**
- `filter=lfs`：
  - **說明**：指定使用 Git LFS 的過濾器來處理這些檔案。這意味著實際的檔案內容會被存儲在 Git LFS，而 Git 倉庫中只保留指向這些大檔案的指標。
  
- `diff=lfs`：
  - **說明**：設定 Git 使用 LFS 的差異比較驅動（diff driver）來處理 `.mp4` 檔案的變更比較。由於視頻檔案通常是二進位檔案，LFS 的 diff 驅動可以更有效地處理這類檔案的變更。
  
- `merge=lfs`：
  - **說明**：指定 Git 使用 LFS 的合併驅動（merge driver）來處理 `.mp4` 檔案的合併。這有助於在合併衝突時更好地管理大型二進位檔案。

### **3. 標記為二進位檔案**
- `-text`：
  - **說明**：這個屬性告訴 Git 不要對這些檔案進行行尾字元（line endings）的自動轉換，並將其視為二進位檔案處理。這對於 `.mp4` 這類非文字檔案尤為重要，以避免檔案內容被意外改變。

### **綜合說明**

這行設定主要涉及以下幾個 `.gitattributes` 的用途：

1. **定義差異（Diff）驅動**：
   - `diff=lfs` 設定了如何比較 `.mp4` 檔案的變更，這屬於之前提到的「定義差異（Diff）驅動」用途。

2. **標記二進位檔案**：
   - `-text` 明確標示這些檔案為二進位檔案，防止 Git 進行不必要的文字處理，這對應於「標記二進位檔案」的用途。

3. **使用過濾器（Filter）**：
   - `filter=lfs` 以及相關的 `merge=lfs`，這部分是針對 Git LFS 的特定配置，雖然在之前的列表中未詳細提及，但它屬於「定義差異驅動」和「指定合併策略」的延伸應用。

### **Git LFS 的優勢**

使用 Git LFS 來管理大檔案（如 `.mp4` 視頻）有以下幾個優點：

- **減少 Git 倉庫大小**：大檔案不會直接存儲在 Git 倉庫中，而是存儲在外部的 LFS 伺服器，保持倉庫的輕量化。
- **提高效能**：拉取和推送操作更快，因為只需處理檔案的指標而非完整內容。
- **版本控制**：仍然可以對大檔案進行版本控制，保留歷史版本。

### **小結**

這一行 `.gitattributes` 的設定主要是為了使用 Git LFS 來有效管理 `.mp4` 視頻檔案，並確保這些檔案在版本控制中的處理方式是最佳化的。它結合了多個 `.gitattributes` 的用途，包括定義差異驅動、標記二進位檔案以及指定合併策略，以達到最佳的版本控制效果。

---